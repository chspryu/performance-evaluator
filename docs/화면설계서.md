# 연주 평가 프로그램 — 화면 설계서

**문서 버전:** 1.0  
**작성일:** 2026-02-16  
**관련 문서:** [요구사항문서.md](./요구사항문서.md)

---

## 1. 화면 흐름 개요

### 1.1 전체 화면 플로우

```
[랜딩/시작] ──► [API 키 설정] (최초 또는 설정)
       │              │
       │              └──────────────────► [이력 목록] ──► [이력 상세] ──► [삭제] 또는 [새 비교하기]
       ▼
[단계 1: 악보 업로드] ──► [단계 2: 참조 연주 URL] ──► [단계 3: 본인 연주]
       ▲              │              │                        │
       │              │              │                        ▼
       └──────────────┴──────────────┴──────────── [평가 실행 대기]
                                                          │
                                                          ▼
                                              [결과 화면: 총점 + 마디별 분석]
                                                          │ (이력에 자동 저장)
                                                          ├── [다시 평가하기] ──► 단계 1로
                                                          └── [이력 보기] ──► 이력 목록
```

### 1.2 화면 목록

| 번호 | 화면 ID | 화면명 | 접근 경로 |
|------|---------|--------|-----------|
| 1 | S01 | 랜딩/시작 | `/` |
| 2 | S02 | API 키 설정 | `/settings` 또는 모달/사이드 패널 |
| 3 | S03 | 단계 1 — 악보 업로드 | `/step/1` |
| 4 | S04 | 단계 2 — 참조 연주 URL | `/step/2` |
| 5 | S05 | 단계 3 — 본인 연주 | `/step/3` |
| 6 | S06 | 평가 진행 중 | `/evaluating` (또는 동일 페이지 오버레이) |
| 7 | S07 | 평가 결과 | `/result` |
| 8 | S08 | 이력 목록 | `/history` |
| 9 | S09 | 이력 상세 | `/history/:id` |

---

## 2. 공통 레이아웃 및 컴포넌트

### 2.1 글로벌 레이아웃 (PC / 모바일)

- **PC (≥768px)**
  - 상단: 로고 + 서비스명, 우측에 "API 키 설정", "이력 보기" 링크/버튼
  - 본문: 최대 너비 720px~900px 중앙 정렬, 세로 여백 충분히
  - 하단: 간단한 푸터(선택), 저작권/문의

- **모바일 (<768px)**
  - 상단: 햄버거 메뉴 또는 로고 + 설정 아이콘
  - 본문: 전체 너비, 좌우 패딩 16px~24px
  - 하단 고정 버튼은 필요 시만 사용(예: "다음 단계")

### 2.2 공통 UI 컴포넌트

| 컴포넌트 | 용도 | 스펙 요약 |
|----------|------|------------|
| **Primary Button** | 다음 단계, 평가하기 등 주 액션 | 배경 강조색, 충분한 터치 영역(최소 44px) |
| **Secondary Button** | 이전, 취소, 다시 입력 | 테두리만 또는 회색 계열 |
| **Text Input** | URL, API 키 입력 | 라벨 + placeholder + 에러 메시지 영역 |
| **File Drop Zone** | 악보/동영상 업로드 | 점선 테두리, 드래그 시 강조, 지원 형식 안내 |
| **Step Indicator** | 1 → 2 → 3 진행 표시 | 원/숫자 + 연결선, 현재 단계 강조 |
| **Card** | 입력 요약, 결과 블록 | 둥근 모서리, 약한 그림자 |
| **Alert** | 에러/경고/성공 | 아이콘 + 메시지, 색상으로 구분 |

---

## 3. 화면별 상세 설계

---

### 3.1 S01 — 랜딩/시작 화면

**목적:** 서비스 소개 및 3단계 플로우 안내, 평가 시작 유도.

**레이아웃 (와이어프레임 개요)**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기          [이력 보기] [API 키 설정] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│            연주를 평가받고 싶다면?                       │
│     악보와 프로 연주를 기준으로 점수와 피드백을 받아보세요. │
│                                                         │
│     ┌─────┐     ┌─────┐     ┌─────┐                      │
│     │  1  │ ─── │  2  │ ─── │  3  │                      │
│     │악보 │     │참조 │     │내연주│                      │
│     └─────┘     └─────┘     └─────┘                      │
│                                                         │
│     • 악보를 업로드하고                                  │
│     • 참조할 프로 연주(YouTube) 링크를 넣고              │
│     • 본인 연주(YouTube 또는 동영상 파일)를 넣으면       │
│       Gemini가 100점 만점으로 평가해 드립니다.           │
│                                                         │
│            [ 평가 시작하기 ]                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| 헤더 | 로고, 우측 "이력 보기" → `/history`, "API 키 설정" 버튼 |
| 히어로 | 짧은 캐치프레이즈 + 3단계 아이콘/숫자 시각화 |
| 설명 | 불릿 3줄: 악보 → 참조 URL → 본인 연주 → 평가 결과 |
| CTA | "평가 시작하기" Primary Button → `/step/1` 이동 |

**반응형**
- 모바일: 제목·설명 폰트 크기 조정, 3단계는 가로로 작게 또는 세로 스택.

---

### 3.2 S02 — API 키 설정

**목적:** 사용자가 본인 Gemini API 키를 입력·저장. (앱에 키가 없을 때 평가 시작 전 유도 가능.)

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기                    [닫기/뒤로]     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  API 키 설정                                             │
│  ─────────────────────────────────────────────────────  │
│  Gemini API 키를 입력하면, 본인 계정의 할당량으로         │
│  평가가 진행됩니다. 키는 서버에 암호화되어 저장됩니다.    │
│                                                         │
│  API 키 *                                                │
│  ┌─────────────────────────────────────────────────┐   │
│  │ •••••••••••••••••••••••••••••••••••••••••••••••  │   │
│  └─────────────────────────────────────────────────┘   │
│  [Google AI Studio에서 API 키 발급받기] (링크)           │
│                                                         │
│  [ 저장 ]                                                │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| 안내 문구 | "본인 Gemini 계정 사용", 저장·보안 안내 |
| 입력 | 비밀번호 타입 또는 마스킹 가능한 단일 라인, placeholder "API 키 붙여넣기" |
| 링크 | "Google AI Studio에서 API 키 발급" 등 |
| 버튼 | "저장" → 유효성 검사 후 저장, 성공 시 토스트/메시지 |

**표현 방식:** 별도 페이지(`/settings`) 또는 모달/사이드 드로어. 모바일에서는 전체 화면 모달 권장.

---

### 3.3 S03 — 단계 1: 악보 업로드

**목적:** 악보 파일(PDF/이미지) 업로드, 미리보기·재업로드.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기                    [API 키 설정]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ●━━━○━━━○  1. 악보 업로드                              │
│                                                         │
│  악보를 업로드해 주세요. (PDF, PNG, JPG 등)              │
│                                                         │
│  ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐   │
│  │   📄  파일을 여기에 끌어다 놓거나 클릭하여 선택   │   │
│  │        PDF, PNG, JPG (최대 20MB)                 │   │
│  └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘   │
│                                                         │
│  [업로드된 경우]                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 📄 score.pdf (3페이지)              [삭제] [미리보기] │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  악보 품질이 좋을수록 평가 정확도가 올라갑니다.          │
│                                                         │
│                              [ 다음: 참조 연주 URL ]     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| Step Indicator | 1 강조, 2·3 비활성 |
| 드롭존 | 드래그 앤 드롭 + 클릭으로 파일 선택, 형식·용량 안내 |
| 업로드 후 | 파일명, 페이지 수(가능 시), 삭제/미리보기 버튼 |
| 미리보기 | 모달 또는 아코디언으로 첫 페이지만 이미지 표시 가능 |
| 버튼 | "다음: 참조 연주 URL" → `/step/2` (악보 있을 때만 활성) |

**반응형:** 드롭존 높이 모바일에서 작게, 터치로 파일 선택 유도.

---

### 3.4 S04 — 단계 2: 참조 연주(프로) YouTube URL

**목적:** 참조할 프로 연주의 YouTube URL 입력 및 검증.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기                    [API 키 설정]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ●━━━●━━━○  2. 참조 연주 (프로)                         │
│                                                         │
│  본받고 싶은 프로 연주의 YouTube 링크를 입력하세요.      │
│                                                         │
│  YouTube URL *                                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │ https://www.youtube.com/watch?v=...               │   │
│  └─────────────────────────────────────────────────┘   │
│  ✓ 재생 가능한 공개 영상입니다.  (또는 에러 메시지)     │
│                                                         │
│  [ 이전 ]                    [ 다음: 본인 연주 ]        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| Step Indicator | 1·2 완료, 3 비활성 |
| 입력 | 단일 URL 입력, blur 또는 버튼으로 "URL 검증" 호출 |
| 피드백 | 검증 성공: "재생 가능한 공개 영상입니다" / 실패: "영상을 불러올 수 없습니다. URL과 공개 여부를 확인하세요." |
| 버튼 | "이전" → `/step/1`, "다음: 본인 연주" → `/step/3` (유효 URL일 때만) |

---

### 3.5 S05 — 단계 3: 본인 연주

**목적:** 본인 연주를 YouTube URL 또는 로컬 동영상 파일로 입력.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기                    [API 키 설정]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ●━━━●━━━●  3. 본인 연주                                │
│                                                         │
│  연주 영상을 YouTube 링크 또는 파일로 올려 주세요.       │
│                                                         │
│  ○ YouTube 링크로 입력    ● 동영상 파일 업로드           │
│  (탭 또는 라디오로 전환)                                 │
│                                                         │
│  [탭: YouTube]                                           │
│  YouTube URL *                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ https://www.youtube.com/watch?v=...             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  [탭: 파일 업로드]                                       │
│  ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐   │
│  │   🎬 동영상을 끌어다 놓거나 선택 (MP4 등, 최대 500MB) │   │
│  └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘   │
│  [업로드 시] progress bar + 파일명 + [삭제]              │
│                                                         │
│  [ 이전 ]                    [ 평가하기 ]                │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| Step Indicator | 1·2·3 모두 완료 표시 |
| 입력 방식 | 라디오/탭: "YouTube 링크" / "동영상 파일" 중 하나만 활성 |
| YouTube | S04와 동일한 URL 필드 + 검증 메시지 |
| 파일 | 드롭존 + 진행률 바, 용량·형식 안내(MP4, MOV 등, 예: 최대 500MB) |
| 버튼 | "이전" → `/step/2`, "평가하기" → API 키 확인 후 평가 시작 |

---

### 3.6 S06 — 평가 진행 중

**목적:** 평가가 진행 중임을 표시하고 대기 유도.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                                                         │
│                    ⏳ (로딩 스피너)                      │
│                                                         │
│              연주를 분석하고 있어요.                     │
│              잠시만 기다려 주세요.                       │
│                                                         │
│              [진행률 바 또는 단계 텍스트]                 │
│              예: 악보 분석 중 → 참조 연주 비교 중 ...    │
│                                                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명소**

| 영역 | 내용 |
|------|------|
| 로딩 | 스피너 또는 스켈레톤, 취소 불가 또는 "취소" 버튼(선택) |
| 메시지 | "연주를 분석하고 있어요. 잠시만 기다려 주세요." |
| 진행 | 폴링/SSE로 단계 업데이트 시 텍스트 변경 가능 |

**표현:** 별도 경로(`/evaluating`) 또는 S05에서 "평가하기" 클릭 시 같은 페이지에 풀스크린 오버레이.

---

### 3.7 S07 — 평가 결과

**목적:** 총점, 기술/표현 요약, 마디별 차이 및 개선 제안 표시.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기     [이력 보기] [다시 평가하기]     │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  평가 결과                    ✓ 이력에 저장되었습니다   │
│  ─────────────────────────────────────────────────────  │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │               총점  78 / 100                     │   │
│  │              (원형 게이지 또는 큰 숫자)           │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  요약                                                    │
│  • 기술: 음정과 리듬은 안정적이나, 고음역 음색이 ...     │
│  • 표현: 다이내믹스 대비 프레이징이 다소 ...             │
│                                                         │
│  ── 마디별 비교 및 개선 제안 ──                          │
│                                                         │
│  ┌─ 마디 1–4 ─────────────────────────────────────┐   │
│  │ 차이: 프로는 도입부를 더 약하게 시작해 ...       │   │
│  │ 개선: p로 시작해 2마디째부터 크레셋도 ...        │   │
│  └────────────────────────────────────────────────┘   │
│  ┌─ 마디 5–8 ─────────────────────────────────────┐   │
│  │ 차이: ...                                       │   │
│  │ 개선: ...                                       │   │
│  └────────────────────────────────────────────────┘   │
│  ... (아코디언 또는 스크롤)                              │
│                                                         │
│            [ 다시 평가하기 ]                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| 헤더 | "이력 보기" → `/history`, "다시 평가하기" → `/step/1` |
| 안내 | "이력에 저장되었습니다" 문구로 저장 사실 표시 |
| 총점 | 0~100 숫자 + 선택적으로 원형 게이지, 색상 구간(예: 90+ 녹색, 70~89 노랑, 70 미만 빨강) |
| 요약 | 기술/표현 2~3문단 또는 불릿, 카드로 구분 가능 |
| 마디별 | 카드 또는 아코디언: "마디 N–M" 제목 + "차이:" + "개선:" 텍스트 블록 |
| 하단 CTA | "다시 평가하기" Primary Button |

**반응형:** 모바일에서 카드 세로 스택, 폰트 크기로 가독성 확보, 터치 스크롤 부드럽게.

---

### 3.8 S08 — 이력 목록

**목적:** 저장된 평가 이력을 목록으로 보고, 새 비교 추가·항목 클릭(상세)·삭제를 할 수 있게 한다.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기          [이력 보기] [API 키 설정] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  평가 이력                        [ 새 비교 추가 ]      │
│  ─────────────────────────────────────────────────────  │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 2026-02-16 14:30    78점              [삭제]     │   │
│  │ 참조: (프로 연주 URL 요약)  본인: (YouTube/파일)  │   │
│  └─────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 2026-02-15 10:00    82점              [삭제]     │   │
│  │ ...                                               │   │
│  └─────────────────────────────────────────────────┘   │
│  (이력 없을 때: "저장된 평가가 없습니다. 새 비교를 추가해 보세요.") │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| 헤더 | "이력 보기" 강조(현재 페이지), "API 키 설정" |
| 액션 | "새 비교 추가" Primary Button → `/step/1` |
| 목록 | 카드: 평가 일시, 총점, 참조/본인 연주 요약(선택), [삭제] 버튼. 카드 클릭 → `/history/:id` |
| 빈 상태 | 이력이 없을 때 안내 문구 + "새 비교 추가" 유도 |

**반응형:** 모바일에서 카드 세로 스택, 삭제는 터치하기 쉬운 영역으로.

---

### 3.9 S09 — 이력 상세

**목적:** 선택한 평가의 결과를 다시 보여 주고, 삭제하거나 목록으로 돌아갈 수 있게 한다.

**레이아웃**

```
┌─────────────────────────────────────────────────────────┐
│  [로고]  연주 평가기     [ 목록으로 ]        [ 삭제 ]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  평가 결과 (2026-02-16 14:30)                           │
│  ─────────────────────────────────────────────────────  │
│  (S07과 동일: 총점, 요약, 마디별 비교 및 개선 제안)      │
│                                                         │
│            [ 목록으로 돌아가기 ]                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**요소 명세**

| 영역 | 내용 |
|------|------|
| 헤더 | "목록으로" → `/history`, "삭제" → 확인 후 DELETE API 호출 → 목록으로 이동 |
| 본문 | S07 결과 화면과 동일 레이아웃(총점, 요약, 마디별 카드). 제목에 평가 일시 표시 |
| 하단 | "목록으로 돌아가기" → `/history` |

**삭제:** "삭제" 클릭 시 확인 다이얼로그("이 평가를 삭제할까요?") → 확인 시 API 호출 후 목록으로 리다이렉트.

---

## 4. 반응형 브레이크포인트 및 동작

| 구간 | 너비 | 적용 사항 |
|------|------|-----------|
| 모바일 | ~479px | 1열, 패딩 16px, 버튼 풀폭, 스텝 인디케이터 간소화 |
| 태블릿 | 480px~767px | 동일 1열, 패딩 24px |
| PC | 768px~ | 본문 max-width 720~900px 중앙, 2열 가능 영역(결과 요약+마디 리스트)만 선택적 적용 |

---

## 5. 접근성 및 공통 동작

- **포커스:** Tab 순서: 로고 → 설정 → Step Indicator → 입력/버튼 → 푸터.
- **에러:** 입력 검증 실패 시 해당 필드 아래에 `aria-describedby`로 에러 메시지 연결.
- **로딩:** "평가하기" 클릭 후 버튼 비활성화 + 스피너로 중복 요청 방지.
- **뒤로가기:** 단계 페이지에서 브라우저 뒤로가기 시 이전 단계로 이동 가능하도록 상태 유지.

---

## 6. 문서 이력

| 버전 | 일자 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2026-02-16 | 최초 작성 |
| 1.1 | 2026-02-16 | 이력 목록(S08)·이력 상세(S09)·삭제·새 비교 추가 |

---

다음 단계: **API 명세**, **기술 설계서** 또는 **프로토타입(HTML/코드)** 작성 시 이 화면 설계를 기준으로 구현할 수 있습니다.
